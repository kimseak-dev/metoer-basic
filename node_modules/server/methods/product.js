import { check, Match  } from 'meteor/check';

Meteor.startup(function () {
    Product._ensureIndex({ "categoryId": 1});
});
Meteor.methods({
    //create
    'Product.insert':function(product){
        check(product,{
            name : String,
            categoryId: String,
            description: String,
            price:String,
            img:Match.Any
        });
        // check(product.img,{
        //     'image':String
        // })
        return Product.insert(product);
    },
    //delete
    'Product.remove':function(id){
        check(id, String);
        return Product.remove({_id:id});
    },
    //update
    'Product.update':function(id,product){
        check(id, String);
        check(product,{
            name : String,
            categoryId: String,
            description: String,
            price:String,
            img:Match.Any
        });
        return Product.update(id,{$set:product});
    },
    //comments on product
    // 'Product.comment':function(id,comments){
    //     check(id, String);
    //     check(comments,{
    //         comment : String,
    //         userId: String,
    //         createdAt:Match.Any
    //     })   ;
    //     // comment=[{comments}];
    //     //check(comment, Match.Any);
    //     return Product.update(id,{ $push: { comment: comments } });
    // }

});
