import { check, Match  } from 'meteor/check';
Meteor.startup(function(){
    Accounts.onCreateUser(function(options,user){
        if(!user.profile){
            user.profile = {};
        }

        user.profile.firstname = options.firstname;
        user.profile.lastname = options.lastname;
        user.profile.email = options.email;
        return user;
    });
    var users = Meteor.users.find().fetch();
    _.each(users,function(userData){
        if(userData.emails[0].address === 'kimseakphon@2ntkh.com'){

            Roles.addUsersToRoles(userData,['admin']);
        }
    });
});
Meteor.methods({
  'User.addrole': function(email){
    check(email, String);
    var users = Meteor.users.find().fetch();
     _.each(users,function(userData){
         if(userData.emails[0].address === email){

             Roles.addUsersToRoles(userData,['admin']);
         }
     });

  }


});
